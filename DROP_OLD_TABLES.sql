-- 기존 테이블 삭제 SQL
-- ⚠️ 경고: 이 작업은 데이터를 영구적으로 삭제합니다!
-- 실행 전에 반드시 백업하세요!

-- 사용 방법:
-- 1. 데이터 백업 먼저 수행
-- 2. 이 SQL 파일 실행
-- 3. ERDCloud 스키마 테이블 생성 (erdcloud_schema.sql 실행)

-- 데이터베이스 선택 (실제 데이터베이스 이름으로 변경하세요)
USE tempdb;

-- ============================================================================
-- 기존 테이블 삭제 (ERDCloud 스키마로 대체)
-- ============================================================================

-- 역순으로 삭제 (외래 키 제약조건 때문)

-- 1. 챗봇 대화 기록 삭제
-- DROP TABLE IF EXISTS `chat_messages`;

-- -- 2. 식단 추천 삭제
-- DROP TABLE IF EXISTS `meal_recommendations`;

-- -- 3. 음식 이미지 분석 결과 삭제
-- DROP TABLE IF EXISTS `food_analyses`;

-- -- 4. 일일 식단 점수 삭제
-- DROP TABLE IF EXISTS `daily_scores`;

-- -- 5. 식사 기록 삭제 (UserFoodHistory로 대체)
-- DROP TABLE IF EXISTS `meal_records`;

-- 6. 사용자 건강 정보 삭제
DROP TABLE IF EXISTS `users`;
DROP TABLE IF EXISTS `Nutrient`;
DROP TABLE IF EXISTS `Food`;

-- ============================================================================
-- 절대 삭제하지 않는 테이블
-- ============================================================================

-- ✅ users - 사용자 정보 (유지)
-- ✅ food_nutrients - 팀원이 관리하는 테이블 (절대 삭제 금지)

-- ============================================================================
-- 삭제 확인
-- ============================================================================

-- 남아있는 테이블 확인
SHOW TABLES;

-- 예상 결과:
-- - users (유지)
-- - food_nutrients (유지)
-- 위 2개 테이블만 남아있어야 합니다.

SELECT '기존 테이블 삭제 완료!' AS message;
SELECT '이제 erdcloud_schema.sql을 실행하여 새 테이블을 생성하세요.' AS next_step;
