<div align="center">

# ğŸŒ¿ K-Calculator Backend

### âš™ï¸ AI ê¸°ë°˜ ê±´ê°• ê´€ë¦¬ ì‹œìŠ¤í…œì˜ ì‹¬ì¥ë¶€

<img src="https://capsule-render.vercel.app/api?type=waving&color=gradient&customColorList=12,15,18,21,24&height=200&section=header&text=Backend%20API&fontSize=70&fontAlignY=35&animation=twinkling&fontColor=fff" />

[![Python](https://img.shields.io/badge/Python-3.12+-3776AB?style=for-the-badge&logo=python&logoColor=white)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.115.4-009688?style=for-the-badge&logo=fastapi&logoColor=white)](https://fastapi.tiangolo.com/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0+-4479A1?style=for-the-badge&logo=mysql&logoColor=white)](https://www.mysql.com/)
[![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4o-412991?style=for-the-badge&logo=openai&logoColor=white)](https://openai.com/)

<br/>

**ğŸ¤– GPT-4o Visionìœ¼ë¡œ ìŒì‹ ìë™ ì¸ì‹**  
**ğŸ“Š ê³¼í•™ì  ê³„ì‚°ìœ¼ë¡œ ë§ì¶¤ ì‹ë‹¨ ì¶”ì²œ**  
**ğŸ”’ ì•ˆì „í•œ ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦**

[ğŸš€ ë¹ ë¥¸ ì‹œì‘](#-ë¹ ë¥¸-ì‹œì‘) â€¢ [ğŸ“¡ API ë¬¸ì„œ](#-api-ì—”ë“œí¬ì¸íŠ¸) â€¢ [ğŸ›  ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ) â€¢ [ğŸ”§ ì„¤ì • ê°€ì´ë“œ](#-í™˜ê²½-ì„¤ì •)

</div>

---

<br/>

## ğŸŒŸ í”„ë¡œì íŠ¸ ì†Œê°œ

> *"ì‚¬ì§„ í•œ ì¥ìœ¼ë¡œ ì˜ì–‘ ë¶„ì„ë¶€í„° ì‹ë‹¨ ì¶”ì²œê¹Œì§€!"*

**K-Calculator Backend**ëŠ” **FastAPI** ê¸°ë°˜ì˜ ê³ ì„±ëŠ¥ í—¬ìŠ¤ì¼€ì–´ API ì„œë²„ì…ë‹ˆë‹¤.  
GPT-4o Vision AIì™€ ì‹ì•½ì²˜ ê³µì‹ ë°ì´í„°ë¥¼ ê²°í•©í•˜ì—¬ ì •í™•í•˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê±´ê°• ê´€ë¦¬ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

<div align="center">

### ğŸ¯ í•µì‹¬ íŠ¹ì§•

```
ğŸ¤– AI ë¶„ì„ â†’ ğŸ“Š ì˜ì–‘ ë°ì´í„° â†’ ğŸ¯ ë§ì¶¤ ì¶”ì²œ â†’ ğŸ“ˆ ê±´ê°• ê´€ë¦¬
```

</div>

<br/>

---

<br/>

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

<div align="center">

<table align="center">
<tr>
<td width="50%" align="center">

### ğŸ¤– AI ìŒì‹ ë¶„ì„
<img src="https://img.icons8.com/color/96/000000/artificial-intelligence.png" width="60"/>

**YOLO11-large + Roboflow + GPT-4o Vision**

ìŒì‹ ì‚¬ì§„ ì—…ë¡œë“œ â†’ YOLO11-large / Roboflowë¡œ ìŒì‹Â·ì‹ì¬ë£Œ íƒì§€ â†’  
GPT-4o Visionì´ í›„ë³´ ë¶„ì„ ë° 4ê°€ì§€ í›„ë³´ ì œì‹œ â†’  
ì‹ì•½ì²˜ DB ë§¤ì¹­ìœ¼ë¡œ ì •í™•í•œ ì˜ì–‘ì†Œ ì œê³µ

```python
POST /api/v1/food/analysis-upload
â†’ ì¹¼ë¡œë¦¬, ë‹¨ë°±ì§ˆ, íƒ„ìˆ˜í™”ë¬¼, ì§€ë°© ë“±
```

</td>
<td width="50%" align="center">

### ğŸ¥— ë§ì¶¤ ì‹ë‹¨ ì¶”ì²œ
<img src="https://img.icons8.com/color/96/000000/healthy-food-calories-calculator.png" width="60"/>

**Harris-Benedict ê³µì‹ ê¸°ë°˜**

ê°œì¸ ì •ë³´ ì…ë ¥ â†’ BMR/TDEE ìë™ ê³„ì‚° â†’  
ê±´ê°• ëª©í‘œ ì„¤ì • â†’ GPTê°€ 3ê°€ì§€ ì‹ë‹¨ ì œì•ˆ â†’  
ì˜ì–‘ì†Œ ê· í˜• ë§ì¶¤

```python
POST /api/v1/recommend/diet-plan
â†’ ì•„ì¹¨/ì ì‹¬/ì €ë…/ê°„ì‹ êµ¬ì„±
```

</td>
</tr>
<tr>
<td width="50%" align="center">

### ğŸ”’ ì•ˆì „í•œ ì¸ì¦
<img src="https://img.icons8.com/color/96/000000/security-checked.png" width="60"/>

**ì„¸ì…˜ ê¸°ë°˜ + ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”**

ì´ë©”ì¼ ë¡œê·¸ì¸ â†’ ì„¸ì…˜ ì¿ í‚¤ ë°œê¸‰ â†’  
bcrypt í•´ì‹± â†’ ì•ˆì „í•œ ì¸ì¦ ìœ ì§€

```python
POST /api/v1/auth/login
â†’ ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ (ì¿ í‚¤)
```

</td>
<td width="50%" align="center">

### ğŸ“Š ê±´ê°• ë¦¬í¬íŠ¸
<img src="https://img.icons8.com/color/96/000000/combo-chart.png" width="60"/>

**NRF9.3 ê¸°ë°˜ ê±´ê°• ì ìˆ˜**

ì‹ë‹¨ ê¸°ë¡ â†’ ì˜ì–‘ì†Œ ë¶„ì„ â†’  
ê±´ê°• ì ìˆ˜ ê³„ì‚° â†’ ê°œì„  ì œì•ˆ ì œê³µ

```python
GET /api/v1/health-report
â†’ ì¼ì¼/ì£¼ê°„/ì›”ê°„ ë¦¬í¬íŠ¸
```

</td>
</tr>
</table>

</div>

<br/>

---

<br/>

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

<div align="center">

### Core Framework

<img src="https://img.shields.io/badge/FastAPI-0.115.4-009688?style=for-the-badge&logo=fastapi&logoColor=white"/>
<img src="https://img.shields.io/badge/Python-3.12+-3776AB?style=for-the-badge&logo=python&logoColor=white"/>
<img src="https://img.shields.io/badge/Pydantic-2.9.2-E92063?style=for-the-badge&logo=pydantic&logoColor=white"/>
<img src="https://img.shields.io/badge/Uvicorn-ASGI-499848?style=for-the-badge&logo=gunicorn&logoColor=white"/>

### Database & ORM

<img src="https://img.shields.io/badge/MySQL-8.0+-4479A1?style=for-the-badge&logo=mysql&logoColor=white"/>
<img src="https://img.shields.io/badge/SQLAlchemy-2.0.36-D71F00?style=for-the-badge&logo=sqlalchemy&logoColor=white"/>
<img src="https://img.shields.io/badge/Alembic-Migration-6BA81E?style=for-the-badge&logo=alembic&logoColor=white"/>
<img src="https://img.shields.io/badge/AsyncMy-0.2.9-00758F?style=for-the-badge&logo=mysql&logoColor=white"/>

### AI & Machine Learning

<img src="https://img.shields.io/badge/OpenAI-GPT--4o-412991?style=for-the-badge&logo=openai&logoColor=white"/>
<img src="https://img.shields.io/badge/YOLO-11_large-00FFFF?style=for-the-badge&logo=yolo&logoColor=black"/>
<img src="https://img.shields.io/badge/LangChain-0.3.4-1C3C3C?style=for-the-badge&logo=chainlink&logoColor=white"/>
<img src="https://img.shields.io/badge/PyTorch-2.5.1-EE4C2C?style=for-the-badge&logo=pytorch&logoColor=white"/>
<img src="https://img.shields.io/badge/OpenCV-4.10.0-5C3EE8?style=for-the-badge&logo=opencv&logoColor=white"/>

### Security & Auth

<img src="https://img.shields.io/badge/Passlib-bcrypt-2B7489?style=for-the-badge&logo=lock&logoColor=white"/>
<img src="https://img.shields.io/badge/Email_Validator-2.2.0-EA4335?style=for-the-badge&logo=gmail&logoColor=white"/>
<img src="https://img.shields.io/badge/Session-Cookie_Based-4CAF50?style=for-the-badge&logo=session&logoColor=white"/>

### Testing & Documentation

<img src="https://img.shields.io/badge/pytest-Testing-0A9EDC?style=for-the-badge&logo=pytest&logoColor=white"/>
<img src="https://img.shields.io/badge/Swagger-API_Docs-85EA2D?style=for-the-badge&logo=swagger&logoColor=black"/>
<img src="https://img.shields.io/badge/ReDoc-API_Docs-8CA1AF?style=for-the-badge&logo=redoc&logoColor=white"/>

</div>

<br/>

---

<br/>

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

<div align="center">

### ğŸ“¦ 5ë¶„ë§Œì— ì‹œì‘í•˜ê¸°!

</div>

```bash
# 1ï¸âƒ£ ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/food-calorie-vision/food-calorie-vision-backend.git
cd food-calorie-vision-backend

# 2ï¸âƒ£ ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 3ï¸âƒ£ íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt

# 4ï¸âƒ£ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘ (DATABASE_URL, OPENAI_API_KEY ì„¤ì •)

# 5ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
mysql -u root -p tempdb < erdcloud_schema_final.sql

# 6ï¸âƒ£ ì„œë²„ ì‹¤í–‰
python -m uvicorn app.main:app --reload --port 8000

# 7ï¸âƒ£ API ë¬¸ì„œ í™•ì¸
# ğŸŒ http://localhost:8000/docs (Swagger UI)
# ğŸ“š http://localhost:8000/redoc (ReDoc)
```

<div align="center">

### ğŸ‰ ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤!

```
âœ… YOLO ëª¨ë¸ ë¡œë“œ ì™„ë£Œ!
âœ… OpenAI GPT-Vision í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì™„ë£Œ!
INFO: Uvicorn running on http://127.0.0.1:8000
```

</div>

<br/>

---

<br/>

## ğŸ”§ í™˜ê²½ ì„¤ì •

### ğŸ“ í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜

`.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”:

```bash
# ğŸ—„ï¸ Database (í•„ìˆ˜)
DATABASE_URL=mysql+asyncmy://user:password@localhost:3306/your_database

# ğŸ¤– OpenAI API (í•„ìˆ˜ â­)
OPENAI_API_KEY=sk-your-openai-api-key-here

# ğŸ¯ YOLO ëª¨ë¸ (ì„ íƒì‚¬í•­)
VISION_MODEL_PATH=yolo11l.pt  # í˜„ì¬ëŠ” YOLOv11-large ê°€ì¤‘ì¹˜ ì‚¬ìš©

# âš™ï¸ Application
APP_ENV=local
API_PREFIX=/api
API_VERSION=v1
PORT=8000

# ğŸŒ CORS (í”„ë¡ íŠ¸ì—”ë“œ URL)
CORS_ALLOW_ORIGINS=http://localhost:3000

# ğŸ” Session (ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦)
SESSION_SECRET_KEY=your-super-secret-key-minimum-32-characters
SESSION_COOKIE_NAME=kcalc_session
SESSION_MAX_AGE=3600
SESSION_HTTPS_ONLY=false
SESSION_SAME_SITE=lax
```

<div align="center">

### âš ï¸ ì¤‘ìš” ì‚¬í•­

| í•­ëª© | ì„¤ëª… |
|:---:|:---|
| ğŸ”‘ **OPENAI_API_KEY** | [OpenAI í”Œë«í¼](https://platform.openai.com/api-keys)ì—ì„œ ë°œê¸‰ |
| ğŸ—„ï¸ **DATABASE_URL** | MySQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ |
| ğŸ”’ **.env íŒŒì¼** | **ì ˆëŒ€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”!** |

</div>

<br/>

---

<br/>

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

<div align="center">

### ğŸ—‚ï¸ API êµ¬ì¡°

</div>

<details>
<summary><b>ğŸ” ì¸ì¦ (Authentication)</b></summary>

<br/>

| Method | Endpoint | ì„¤ëª… |
|:---:|:---|:---|
| `POST` | `/api/v1/auth/signup` | íšŒì›ê°€ì… (ì´ë©”ì¼, username, password) |
| `POST` | `/api/v1/auth/login` | ë¡œê·¸ì¸ (ì„¸ì…˜ ì¿ í‚¤ ë°œê¸‰) |
| `POST` | `/api/v1/auth/logout` | ë¡œê·¸ì•„ì›ƒ (ì„¸ì…˜ ì‚­ì œ) |
| `GET` | `/api/v1/auth/session` | ì„¸ì…˜ ì •ë³´ ì¡°íšŒ |
| `GET` | `/api/v1/auth/me` | í˜„ì¬ ì‚¬ìš©ì ì •ë³´ |

**ì˜ˆì‹œ:**
```bash
# íšŒì›ê°€ì…
curl -X POST http://localhost:8000/api/v1/auth/signup \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "username": "í™ê¸¸ë™",
    "password": "secure123!@#"
  }'
```

</details>

<details>
<summary><b>ğŸ‘¤ ì‚¬ìš©ì (User)</b></summary>

<br/>

| Method | Endpoint | ì„¤ëª… |
|:---:|:---|:---|
| `GET` | `/api/v1/user/info` | ì‚¬ìš©ì ê¸°ë³¸ ì •ë³´ |
| `GET` | `/api/v1/user/health-info` | ê±´ê°• ì •ë³´ (ë‚˜ì´, ì²´ì¤‘, í‚¤, ëª©í‘œ) |
| `GET` | `/api/v1/user/intake-data` | 7ì¼ê°„ ì„­ì·¨ ë°ì´í„° |
| `PUT` | `/api/v1/user/profile` | í”„ë¡œí•„ ìˆ˜ì • |

</details>

<details>
<summary><b>ğŸ“¸ AI ìŒì‹ ë¶„ì„ (Vision)</b></summary>

<br/>

| Method | Endpoint | ì„¤ëª… |
|:---:|:---|:---|
| `POST` | `/api/v1/food/analysis-upload` | ìŒì‹ ì‚¬ì§„ ë¶„ì„ (4ê°œ í›„ë³´ ë°˜í™˜) |
| `POST` | `/api/v1/food/reanalyze-with-selection` | ì„ íƒí•œ í›„ë³´ ì¬ë¶„ì„ |
| `POST` | `/api/v1/food/save-food` | ìŒì‹ ì„­ì·¨ ê¸°ë¡ ì €ì¥ |

**íŒŒì´í”„ë¼ì¸:**
```
ğŸ“¸ ì´ë¯¸ì§€ ì—…ë¡œë“œ
    â†“
ğŸ¯ YOLO11-large / Roboflow ì¬ë£Œ íƒì§€
    â†“
ğŸ¤– GPT-4o Vision ë¶„ì„
    â†“
ğŸ—„ï¸ ì‹ì•½ì²˜ DB ë§¤ì¹­
    â†“
ğŸ“Š ì˜ì–‘ ì •ë³´ ë°˜í™˜
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "success": true,
  "data": {
    "foodName": "ë‹­ê°€ìŠ´ì‚´ ìƒëŸ¬ë“œ",
    "calories": 250,
    "nutrients": {
      "protein": 35.0,
      "carbs": 15.0,
      "fat": 8.0,
      "fiber": 5.0
    },
    "healthScore": 85,
    "suggestions": [
      "ë‹¨ë°±ì§ˆì´ í’ë¶€í•œ ê±´ê°•í•œ ì‹ì‚¬ì…ë‹ˆë‹¤!",
      "ì‹ì´ì„¬ìœ ê°€ ì¶©ë¶„íˆ í¬í•¨ë˜ì–´ ìˆì–´ìš”."
    ]
  }
}
```

</details>

<details>
<summary><b>ğŸ¥— AI ì‹ë‹¨ ì¶”ì²œ (Recommendation)</b></summary>

<br/>

| Method | Endpoint | ì„¤ëª… |
|:---:|:---|:---|
| `POST` | `/api/v1/recommend/diet-plan` | ë§ì¶¤ ì‹ë‹¨ ì¶”ì²œ (3ê°€ì§€ ì˜µì…˜) |
| `POST` | `/api/v1/recommend/save-diet-plan` | ì„ íƒí•œ ì‹ë‹¨ ì €ì¥ |
| `GET` | `/api/v1/recommend/my-diet-plans` | ë‚´ ì‹ë‹¨ ëª©ë¡ |
| `GET` | `/api/v1/recommend/diet-plans/{id}` | ì‹ë‹¨ ìƒì„¸ ì¡°íšŒ |

**ì¶”ì²œ í”„ë¡œì„¸ìŠ¤:**
```
ğŸ‘¤ ì‚¬ìš©ì ì •ë³´ ì…ë ¥
    â†“
ğŸ§® Harris-Benedict ê³µì‹
    â†“
ğŸ“Š BMR/TDEE ê³„ì‚°
    â†“
ğŸ¯ ëª©í‘œ ì¹¼ë¡œë¦¬ ì‚°ì¶œ
    â†“
ğŸ¤– GPT-4o ì‹ë‹¨ ìƒì„±
    â†“
ğŸ½ï¸ 3ê°€ì§€ ì˜µì…˜ ì œê³µ
```

</details>

<details>
<summary><b>ğŸ¥• ì¬ë£Œ ê¸°ë°˜ ë ˆì‹œí”¼ (Ingredients)</b></summary>

<br/>

| Method | Endpoint | ì„¤ëª… |
|:---:|:---|:---|
| `POST` | `/api/v1/ingredients/analyze` | ì¬ë£Œ ì‚¬ì§„ ë¶„ì„ |
| `POST` | `/api/v1/ingredients/recommend-recipes` | ë ˆì‹œí”¼ ì¶”ì²œ |

</details>

<details>
<summary><b>ğŸ“Š ê±´ê°• ë¦¬í¬íŠ¸ (Health)</b></summary>

<br/>

| Method | Endpoint | ì„¤ëª… |
|:---:|:---|:---|
| `GET` | `/api/v1/health-report` | ê±´ê°• ë¦¬í¬íŠ¸ ì¡°íšŒ |
| `POST` | `/api/v1/health-score` | NRF9.3 ê±´ê°• ì ìˆ˜ ê³„ì‚° |
| `GET` | `/api/v1/meals/dashboard-stats` | ëŒ€ì‹œë³´ë“œ í†µê³„ |
| `GET` | `/api/v1/meals/score-detail` | ì ìˆ˜ ìƒì„¸ ë¶„ì„ |

</details>

<details>
<summary><b>ğŸ’¬ ê³ ê° ì„¼í„° (Customer Service)</b></summary>

<br/>

| Method | Endpoint | ì„¤ëª… |
|:---:|:---|:---|
| `GET` | `/api/v1/announcements` | ê³µì§€ì‚¬í•­ ëª©ë¡ |
| `POST` | `/api/v1/inquiries` | ë¬¸ì˜í•˜ê¸° |
| `GET` | `/api/v1/inquiries` | ë‚´ ë¬¸ì˜ ë‚´ì—­ |

</details>

<br/>

<div align="center">

### ğŸ“š ìë™ ìƒì„± API ë¬¸ì„œ

| ë„êµ¬ | URL | ì„¤ëª… |
|:---:|:---|:---|
| ğŸ“– **Swagger UI** | http://localhost:8000/docs | ëŒ€í™”í˜• API í…ŒìŠ¤íŠ¸ |
| ğŸ“˜ **ReDoc** | http://localhost:8000/redoc | ê¹”ë”í•œ ë¬¸ì„œ í˜•ì‹ |

</div>

<br/>

---

<br/>

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ğŸŒ³ food-calorie-vision-backend/
â”‚
â”œâ”€â”€ ğŸ“ app/                          # ì• í”Œë¦¬ì¼€ì´ì…˜ ë£¨íŠ¸
â”‚   â”œâ”€â”€ ğŸ“„ main.py                  # FastAPI ì•± ì§„ì…ì 
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ api/                      # API ë¼ìš°í„°
â”‚   â”‚   â””â”€â”€ ğŸ“ v1/
â”‚   â”‚       â”œâ”€â”€ ğŸ“ routes/          # ì—”ë“œí¬ì¸íŠ¸ í•¸ë“¤ëŸ¬
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ” auth.py     # ì¸ì¦
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ‘¤ users.py    # ì‚¬ìš©ì
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“¸ vision.py   # AI ìŒì‹ ë¶„ì„
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ¥— recommend.py # ì‹ë‹¨ ì¶”ì²œ
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ¥• ingredients.py # ì¬ë£Œ ë ˆì‹œí”¼
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“Š meals.py    # ì‹ì‚¬ ê¸°ë¡
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ’¬ chat.py     # ì±—ë´‡
â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“§ customer_service.py
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ ğŸ“ schemas/         # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“ common.py
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ” auth.py
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ‘¤ users.py
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“¸ vision.py
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ¥— recipe.py
â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“Š meal.py
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ ğŸ“„ router.py        # ë©”ì¸ ë¼ìš°í„°
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ core/                     # í•µì‹¬ ì„¤ì •
â”‚   â”‚   â””â”€â”€ âš™ï¸ config.py
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ db/                       # ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”‚   â”œâ”€â”€ ğŸ—„ï¸ base.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“Š models.py            # SQLAlchemy ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ ğŸ”— session.py           # DB ì„¸ì…˜
â”‚   â”‚   â”œâ”€â”€ ğŸ“‹ models_food_nutrients.py
â”‚   â”‚   â””â”€â”€ ğŸ½ï¸ models_user_contributed.py
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ services/                 # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ ğŸ” auth_service.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“¸ vision_service.py
â”‚   â”‚   â”œâ”€â”€ ğŸ¥— recipe_recommendation_service.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“Š health_score_service.py
â”‚   â”‚   â”œâ”€â”€ ğŸ’¾ user_context_cache.py
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ utils/                    # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ ğŸ”’ session.py
â”‚   â”‚   â””â”€â”€ ğŸ”§ helpers.py
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ workers/                  # ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…
â”‚
â”œâ”€â”€ ğŸ“ tests/                        # í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ ğŸ“ unit/
â”‚   â””â”€â”€ ğŸ“„ conftest.py
â”‚
â”œâ”€â”€ ğŸ“ alembic/                      # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â”œâ”€â”€ ğŸ“ versions/
â”‚   â””â”€â”€ âš™ï¸ env.py
â”‚
â”œâ”€â”€ ğŸ“ docs/                         # ë¬¸ì„œ
â”‚   â”œâ”€â”€ ğŸ“š ENV_SETUP_GUIDE.md
â”‚   â”œâ”€â”€ ğŸ¤– YOLO_GPT_VISION_SETUP.md
â”‚   â”œâ”€â”€ ğŸ¥— RECIPE_FEATURE_GUIDE.md
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ ğŸ“ migrations/                   # SQL ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ ğŸ“ *.sql
â”‚
â”œâ”€â”€ ğŸ“ models/                       # AI ëª¨ë¸ íŒŒì¼
â”‚   â””â”€â”€ ğŸ¯ yolo11l.pt   # YOLOv11-large ê°€ì¤‘ì¹˜
â”‚
â”œâ”€â”€ âš™ï¸ alembic.ini
â”œâ”€â”€ ğŸ“¦ requirements.txt              # Python ì˜ì¡´ì„±
â”œâ”€â”€ ğŸ”’ .env.example
â”œâ”€â”€ ğŸ“– README.md
â””â”€â”€ ğŸ .gitignore
```

<br/>

---

<br/>

## ğŸ¤– AI ì‹œìŠ¤í…œ ìƒì„¸

<div align="center">

### ğŸ¯ ìŒì‹ ì¸ì‹ íŒŒì´í”„ë¼ì¸

</div>

```mermaid
graph LR
    A[ğŸ“¸ ì´ë¯¸ì§€ ì—…ë¡œë“œ] --> B[ğŸ¯ YOLO Detection]
    B --> C[ğŸ” ëŒ€ë¶„ë¥˜ ì¶”ì¶œ]
    C --> D[ğŸ¤– 1ì°¨ GPT Vision]
    D --> E[ğŸ“‹ ëŒ€ë¶„ë¥˜ ì„ íƒ]
    E --> F[ğŸ—„ï¸ DB ìŒì‹ ëª©ë¡ ì¡°íšŒ]
    F --> G[ğŸ¤– 2ì°¨ GPT Vision]
    G --> H[ğŸ¯ 4ê°œ í›„ë³´ ì œì‹œ]
    H --> I[âœ… ì‚¬ìš©ì ì„ íƒ]
    I --> J[ğŸ“Š ì˜ì–‘ ì •ë³´ ë°˜í™˜]
```

<details>
<summary><b>ğŸ” ìƒì„¸ ì²˜ë¦¬ ê³¼ì •</b></summary>

<br/>

### 1ë‹¨ê³„: YOLO / Roboflow ê°ì²´ íƒì§€
- **ëª¨ë¸**: YOLO11-large + Roboflow ì¬ë£Œ íƒì§€ API
- **ì—­í• **: ì´ë¯¸ì§€ì—ì„œ ìŒì‹/ì‹ì¬ë£Œ ìœ„ì¹˜ íŒŒì•…
- **ì¶œë ¥**: Bounding box + confidence score + class(label)

### 2ë‹¨ê³„: GPT Vision 1ì°¨ ë¶„ì„
- **ì…ë ¥**: ì›ë³¸ ì´ë¯¸ì§€ + YOLO ê²°ê³¼
- **ì²˜ë¦¬**: ì‹ì•½ì²˜ DBì˜ ëŒ€ë¶„ë¥˜ ëª©ë¡ ì œê³µ
- **ì¶œë ¥**: ê°€ì¥ ê°€ëŠ¥ì„± ë†’ì€ ëŒ€ë¶„ë¥˜ ì„ íƒ

### 3ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬
- **ì…ë ¥**: ì„ íƒëœ ëŒ€ë¶„ë¥˜
- **ì²˜ë¦¬**: í•´ë‹¹ ëŒ€ë¶„ë¥˜ì˜ ëª¨ë“  ìŒì‹ ì¡°íšŒ
- **ì¶œë ¥**: ìŒì‹ ëª©ë¡ (ìµœëŒ€ ìˆ˜ë°± ê°œ)

### 4ë‹¨ê³„: GPT Vision 2ì°¨ ë¶„ì„
- **ì…ë ¥**: ì›ë³¸ ì´ë¯¸ì§€ + ìŒì‹ ëª©ë¡
- **ì²˜ë¦¬**: ê°€ì¥ ìœ ì‚¬í•œ ìŒì‹ 4ê°œ ì„ íƒ
- **ì¶œë ¥**: ìˆœìœ„ë³„ í›„ë³´ (1~4ìˆœìœ„)

### 5ë‹¨ê³„: ì‚¬ìš©ì í™•ì¸
- **ì…ë ¥**: 4ê°œ í›„ë³´ ì œì‹œ
- **ì²˜ë¦¬**: ì‚¬ìš©ìê°€ ê°€ì¥ ì •í™•í•œ ê²ƒ ì„ íƒ
- **ì¶œë ¥**: ìµœì¢… í™•ì •ëœ ìŒì‹

### 6ë‹¨ê³„: ì˜ì–‘ ì •ë³´ ì œê³µ
- **ì…ë ¥**: í™•ì •ëœ ìŒì‹ ID
- **ì²˜ë¦¬**: ì‹ì•½ì²˜ DBì—ì„œ ì˜ì–‘ì†Œ ì¡°íšŒ
- **ì¶œë ¥**: ì¹¼ë¡œë¦¬, ë‹¨ë°±ì§ˆ, íƒ„ìˆ˜í™”ë¬¼, ì§€ë°© ë“±

</details>

<br/>

<div align="center">

### ğŸ¥— ì‹ë‹¨ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜

</div>

```python
# Harris-Benedict ê³µì‹
BMR (ë‚¨ì„±) = 88.362 + (13.397 Ã— ì²´ì¤‘kg) + (4.799 Ã— í‚¤cm) - (5.677 Ã— ë‚˜ì´)
BMR (ì—¬ì„±) = 447.593 + (9.247 Ã— ì²´ì¤‘kg) + (3.098 Ã— í‚¤cm) - (4.330 Ã— ë‚˜ì´)

# ì´ ì—ë„ˆì§€ ì†Œë¹„ëŸ‰
TDEE = BMR Ã— í™œë™ê³„ìˆ˜

# ëª©í‘œ ì¹¼ë¡œë¦¬
ì¦ëŸ‰: TDEE + 300~500 kcal
ìœ ì§€: TDEE
ê°ëŸ‰: TDEE - 300~500 kcal
```

<details>
<summary><b>ğŸ“Š ì˜ì–‘ì†Œ ë°°ë¶„ ì „ëµ</b></summary>

<br/>

| ëª©í‘œ | íƒ„ìˆ˜í™”ë¬¼ | ë‹¨ë°±ì§ˆ | ì§€ë°© |
|:---:|:---:|:---:|:---:|
| ğŸ”¥ **ê°ëŸ‰** | 40% | 35% | 25% |
| âš–ï¸ **ìœ ì§€** | 50% | 25% | 25% |
| ğŸ’ª **ì¦ëŸ‰** | 55% | 25% | 20% |

**ì¶”ì²œ ì‹œìŠ¤í…œ íŠ¹ì§•:**
- âœ… ê°œì¸ ë§ì¶¤í˜• ì¹¼ë¡œë¦¬ ê³„ì‚°
- âœ… 3ê°€ì§€ ìŠ¤íƒ€ì¼ ì‹ë‹¨ ì œê³µ
- âœ… ì•„ì¹¨/ì ì‹¬/ì €ë…/ê°„ì‹ êµ¬ì„±
- âœ… ì¬ë£Œ ë° ë ˆì‹œí”¼ í¬í•¨
- âœ… ì•Œë ˆë¥´ê¸° ì •ë³´ ê³ ë ¤

</details>

<br/>

---

<br/>

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

<div align="center">

### ğŸ“Š ERDCloud ê¸°ë°˜ ì„¤ê³„

</div>

<details>
<summary><b>ğŸ—‚ï¸ ì£¼ìš” í…Œì´ë¸”</b></summary>

<br/>

### ğŸ‘¤ ì‚¬ìš©ì ê´€ë ¨

| í…Œì´ë¸” | ì„¤ëª… | ì£¼ìš” ì»¬ëŸ¼ |
|:---|:---|:---|
| **User** | ì‚¬ìš©ì ê¸°ë³¸ ì •ë³´ | user_id, email, username, password_hash |
| **UserPreferences** | ì‚¬ìš©ì ì„ í˜¸ë„ | goal_calories, activity_level |
| **disease_allergy_profile** | ì§ˆë³‘/ì•Œë ˆë¥´ê¸° | diseases, allergies |

### ğŸ½ï¸ ìŒì‹ ê´€ë ¨

| í…Œì´ë¸” | ì„¤ëª… | ì£¼ìš” ì»¬ëŸ¼ |
|:---|:---|:---|
| **Food** | ìŒì‹ ê¸°ë³¸ ì •ë³´ | food_id, food_name, food_category |
| **food_nutrients** | ì˜ì–‘ì†Œ ì •ë³´ (ì‹ì•½ì²˜) | calories, protein, carbs, fat |
| **UserFoodHistory** | ì„­ì·¨ ê¸°ë¡ | user_id, food_id, consumed_at, meal_type |
| **UserContributedFood** | ì‚¬ìš©ì ë“±ë¡ ìŒì‹ | custom_food_id, food_name, nutrients |

### ğŸ¥— ì‹ë‹¨ ì¶”ì²œ

| í…Œì´ë¸” | ì„¤ëª… | ì£¼ìš” ì»¬ëŸ¼ |
|:---|:---|:---|
| **DietPlan** | ì¶”ì²œ ì‹ë‹¨ | diet_plan_id, user_id, target_calories |
| **DietPlanMeal** | ì‹ë‹¨ ìƒì„¸ | meal_id, meal_type, food_items |
| **Recipe** | ë ˆì‹œí”¼ ì •ë³´ | recipe_id, ingredients, steps |

### ğŸ“Š ê±´ê°• ê´€ë¦¬

| í…Œì´ë¸” | ì„¤ëª… | ì£¼ìš” ì»¬ëŸ¼ |
|:---|:---|:---|
| **health_score** | ê±´ê°• ì ìˆ˜ | score_id, user_id, nrf_score, date |
| **HealthReport** | ê±´ê°• ë¦¬í¬íŠ¸ | report_id, user_id, report_type |

### ğŸ’¬ ê³ ê° ì§€ì›

| í…Œì´ë¸” | ì„¤ëª… | ì£¼ìš” ì»¬ëŸ¼ |
|:---|:---|:---|
| **Announcement** | ê³µì§€ì‚¬í•­ | announcement_id, title, content |
| **Inquiry** | ë¬¸ì˜ì‚¬í•­ | inquiry_id, user_id, question, answer |

</details>

<br/>

---

<br/>

## ğŸ§ª í…ŒìŠ¤íŠ¸

<div align="center">

### âœ… í’ˆì§ˆ ë³´ì¦

</div>

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest

# ìƒì„¸ ì¶œë ¥
pytest -v

# ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸
pytest --cov=app tests/

# íŠ¹ì • íŒŒì¼ë§Œ í…ŒìŠ¤íŠ¸
pytest tests/unit/test_auth.py

# íŠ¹ì • í•¨ìˆ˜ë§Œ í…ŒìŠ¤íŠ¸
pytest tests/unit/test_auth.py::test_login_success
```

<br/>

---

<br/>

## ğŸ” ë¬¸ì œ í•´ê²°

<details>
<summary><b>âŒ CORS ì˜¤ë¥˜</b></summary>

<br/>

**ì¦ìƒ:**
```
Access to fetch at 'http://localhost:8000/api/v1/...' from origin 'http://localhost:3000' 
has been blocked by CORS policy
```

**í•´ê²°:**
`.env` íŒŒì¼ì—ì„œ `CORS_ALLOW_ORIGINS` í™•ì¸
```bash
CORS_ALLOW_ORIGINS=http://localhost:3000
```

</details>

<details>
<summary><b>âŒ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜</b></summary>

<br/>

**ì¦ìƒ:**
```
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) 
(2003, "Can't connect to MySQL server...")
```

**í•´ê²° ë°©ë²•:**
1. MySQL ì„œë²„ ì‹¤í–‰ í™•ì¸
2. `.env`ì˜ `DATABASE_URL` í™•ì¸
3. ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± í™•ì¸
```bash
mysql -u root -p
CREATE DATABASE your_database;
```

</details>

<details>
<summary><b>âŒ OpenAI API ì˜¤ë¥˜</b></summary>

<br/>

**ì¦ìƒ:**
```
openai.error.AuthenticationError: Invalid API key provided
```

**í•´ê²°:**
1. `.env`ì— ì˜¬ë°”ë¥¸ API í‚¤ ì„¤ì •
2. [OpenAI í”Œë«í¼](https://platform.openai.com/api-keys)ì—ì„œ í‚¤ í™•ì¸
3. API í¬ë ˆë”§ ì”ì•¡ í™•ì¸

</details>

<details>
<summary><b>âŒ YOLO ëª¨ë¸ ë¡œë“œ ì˜¤ë¥˜</b></summary>

<br/>

**ì¦ìƒ:**
```
FileNotFoundError: [Errno 2] No such file or directory: 'yolo11-large.pt'
```

**í•´ê²°:**
ëª¨ë¸ì´ ìë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²° í™•ì¸ í›„ ì¬ì‹œì‘

</details>

<br/>

---

<br/>

## ğŸ“š ì¶”ê°€ ë¬¸ì„œ

<div align="center">

| ë¬¸ì„œ | ì„¤ëª… |
|:---|:---|
| ğŸ“– [ENV_SETUP_GUIDE.md](./docs/ENV_SETUP_GUIDE.md) | í™˜ê²½ ë³€ìˆ˜ ìƒì„¸ ê°€ì´ë“œ |
| ğŸ¤– [YOLO_GPT_VISION_SETUP.md](./docs/YOLO_GPT_VISION_SETUP.md) | AI ëª¨ë¸ ì„¤ì • ê°€ì´ë“œ |
| ğŸ¥— [RECIPE_FEATURE_GUIDE.md](./docs/RECIPE_FEATURE_GUIDE.md) | ë ˆì‹œí”¼ ê¸°ëŠ¥ ê°€ì´ë“œ |
| ğŸ” [SESSION_AUTH_GUIDE.md](./docs/SESSION_AUTH_GUIDE.md) | ì¸ì¦ ì‹œìŠ¤í…œ ê°€ì´ë“œ |
| ğŸ“Š [NRF93_IMPLEMENTATION_GUIDE.md](./docs/NRF93_IMPLEMENTATION_GUIDE.md) | ê±´ê°• ì ìˆ˜ ê°€ì´ë“œ |
| ğŸ”§ [íŠ¸ëŸ¬ë¸”ìŠˆíŒ….md](./docs/íŠ¸ëŸ¬ë¸”ìŠˆíŒ….md) | ë¬¸ì œ í•´ê²° ëª¨ìŒ |

</div>

<br/>

---

<br/>

## ğŸ‘¥ íŒ€ & ê¸°ì—¬

<div align="center">

### ğŸŒ± K-Calculator Backend Team

*ì•ˆì „í•˜ê³  ë¹ ë¥¸ APIë¥¼ ë§Œë“œëŠ” ì‚¬ëŒë“¤*

<br/>

| Role | Developer | GitHub |
|:---:|:---:|:---:|
| ğŸ”§ **Backend Lead** | ê¶Œí˜ | [@Hyuk-CBRN4](https://github.com/Hyuk-CBRN4) |
| ğŸ¤– **AI Engineer** | ê¹€ì¤€í˜¸ | [@Junho](https://github.com/zpzlzmz) |
| ğŸ“Š **Data Engineer** | ì£¼ì—°ì„ | [@YeonSeok-Joo](https://github.com/YeonSeok-Joo) |
| ğŸ¨ **Frontend Lead** | ê¹€ì€ì§„ | [@eunjinlo](https://github.com/eunjinlo) |

<br/>

## ğŸ“§ ë¬¸ì˜

<div align="center">

### ğŸ’Œ Contact

ì§ˆë¬¸ì´ë‚˜ ì œì•ˆì‚¬í•­ì´ ìˆìœ¼ì‹ ê°€ìš”?

ğŸ“§ **Email:** backend@k-calculator.com  
ğŸ’¬ **Issues:** [GitHub Issues](https://github.com/food-calorie-vision/food-calorie-vision-backend/issues)  
ğŸ“š **API Docs:** [Swagger UI](http://localhost:8000/docs)

<br/>

### ğŸŒŸ Star ì£¼ì‹œë©´ í° í˜ì´ ë©ë‹ˆë‹¤!

[![Star](https://img.shields.io/github/stars/food-calorie-vision/food-calorie-vision-backend?style=social)](https://github.com/food-calorie-vision/food-calorie-vision-backend/stargazers)

</div>

<br/>

---

<br/>

<div align="center">

### ğŸŒ¿ ê±´ê°•í•œ ë‚´ì¼ì„ ë§Œë“œëŠ” ê¸°ìˆ 

<br/>

**Made with ğŸ’š by K-Calculator Backend Team**

<br/>

<img src="https://capsule-render.vercel.app/api?type=waving&color=gradient&customColorList=12,15,18,21,24&height=150&section=footer" />

</div>

